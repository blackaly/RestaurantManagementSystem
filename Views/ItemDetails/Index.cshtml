@using OrderingSystem.Models.ViewModel;
@model MenuItemViewModel;

<main>
    <section class="breadcrumb-area d-flex align-items-center" style="background-image:url(img/bg/test-bg.png)">
        <div class="container">
            <div class="row">
                <div class="col-xl-6 offset-xl-3 col-lg-8 offset-lg-2">
                    <div class="breadcrumb-wrap text-center">
                        <div class="breadcrumb-title mt-115 mb-30">
                            <h2>Shop Details</h2>
                        </div>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">News</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="shop-banner-area pt-120 pb-90 wow fadeInUp animated" data-animation="fadeInUp animated" data-delay=".2s">
        <div class="container">
            <div class="row">
                <div class="col-xl-7">
                    <div class="shop-thumb-tab mb-30">
                        <ul class="nav" id="myTab2" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab"
                                   aria-selected="true"><img src="img/menu/menu-01.png" alt=""> </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                                   aria-selected="false"><img src="img/menu/menu-02.png" alt=""></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab2" data-toggle="tab" href="#profile1" role="tab"
                                   aria-selected="false"><img src="img/menu/menu-03.png" alt=""></a>
                            </li>
                        </ul>
                    </div>
                    <div class="product-details-img mb-30">
                        <div class="tab-content" id="myTabContent2">
                            <div class="tab-pane fade show active" id="home" role="tabpanel">
                                <div class="product-large-img">
                                    <img src="/uploads/@Model.ImageUrl" alt="">
                                </div>
                            </div>
                            <div class="tab-pane fade" id="profile" role="tabpanel">
                                <div class="product-large-img">
                                    <img src="img/menu/menu-03.png" alt="">
                                </div>
                            </div>
                            <div class="tab-pane fade" id="profile1" role="tabpanel">
                                <div class="product-large-img">
                                    <img src="img/menu/menu-03.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-5">
                    <div class="product-details mb-30">
                        <div class="product-details-title">
                            <h1 class="productname">@Model.Name</h1>
                            <div class="price details-price pb-30 mb-20">
                                <span>@Model.Price.ToString("C")</span>
                                <span class="old-price">$820.00</span>
                            </div>
                        </div>
                        <p>
                           @Model.Description
                        </p>
                        <div class="product-cat mt-30 mb-30">
                            <span>Category: </span>
                            <a href="#">@Model.Category</a>
                        </div>
                        <div class="product-details-action">
                                <div class="plus-minus">
                                    <div class="cart-plus-minus"><input class="product-quantity" type="text" value="1" /></div>
                                </div>
                            <button onclick="addToCart()" class="btn btn-black" type="submit">add to cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- shop-banner-area end -->
    <!-- product-desc-area start -->
    <section class="product-desc-area pb-80">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="bakix-details-tab">
                        <ul class="nav text-center justify-content-center pb-30 mb-50" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="desc-tab" data-toggle="tab" href="#id-desc" role="tab"
                                   aria-controls="home" aria-selected="true">Description </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="id-add-in" data-toggle="tab" href="#id-add" role="tab"
                                   aria-controls="profile" aria-selected="false">Additional Information</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="id-r" data-toggle="tab" href="#id-rev" role="tab"
                                   aria-controls="profile" aria-selected="false">Reviews(10)</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="id-desc" role="tabpanel" aria-labelledby="desc-tab">
                            <div class="event-text mb-40">
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                    incididunt ut labore et dolore magna
                                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
                                    ut aliquip ex ea commodo consequat.
                                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                                    fugiat nulla pariatur. Excepteur sint
                                    occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
                                    id est laborum. Sed ut perspiciatis
                                    unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,
                                    totam rem aperiam, eaque ipsa quae ab
                                    illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                                    Nemo enim ipsam voluptatem quia
                                    voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores
                                    eos qui ratione voluptatem sequi
                                    nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet,
                                    consectetur, adipisci velit, sed quia non
                                    numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat
                                    voluptatem.
                                </p>
                                <p>
                                    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
                                    deserunt mollit anim id est laborum. Sed ut
                                    perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque
                                    laudantium, totam rem aperiam, eaque
                                    ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta
                                    sunt explicabo. Nemo enim ipsam voluptatem
                                    quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni
                                    dolores eos qui ratione voluptatem sequi
                                    nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet,
                                    consectetur, adipisci velit, sed quia non
                                    numquam eius modi tempora.
                                </p>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="id-add" role="tabpanel" aria-labelledby="id-add-in">
                            <div class="additional-info">
                                <div class="table-responsive">
                                    <h4>Additional information</h4>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <th>Weight</th>
                                                <td class="product_weight">1.4 oz</td>
                                            </tr>
                                            <tr>
                                                <th>Dimensions</th>
                                                <td class="product_dimensions">62 × 56 × 12 in</td>
                                            </tr>
                                            <tr>
                                                <th>Size</th>
                                                <td class="product_dimensions">XL, XXL, LG, SM, MD</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="id-rev" role="tabpanel" aria-labelledby="id-r">
                            <div class="additional-info">
                                <div class="event-text mb-40">
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna
                                        aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
                                        ut aliquip ex ea commodo consequat.
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                                        fugiat nulla pariatur. Excepteur sint
                                        occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
                                        id est laborum. Sed ut perspiciatis
                                        unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,
                                        totam rem aperiam, eaque ipsa quae ab
                                        illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                                        Nemo enim ipsam voluptatem quia
                                        voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores
                                        eos qui ratione voluptatem sequi
                                        nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet,
                                        consectetur, adipisci velit, sed quia non
                                        numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat
                                        voluptatem.
                                    </p>
                                    <p>
                                        Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
                                        deserunt mollit anim id est laborum. Sed ut
                                        perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque
                                        laudantium, totam rem aperiam, eaque
                                        ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta
                                        sunt explicabo. Nemo enim ipsam voluptatem
                                        quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni
                                        dolores eos qui ratione voluptatem sequi
                                        nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet,
                                        consectetur, adipisci velit, sed quia non
                                        numquam eius modi tempora.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- product-desc-area end -->
</main>

@section Scripts
{
    <script>

            function addToCart() {

                var price = document.querySelector(".price span").textContent;
                price = price.substr(1);
                var productName = document.querySelector(".productname").textContent;
                var quantity = document.querySelector(".product-quantity").value;
                console.log(price)

                var cartItem = {
                    ProductName: productName,
                    Price: price,
                    Quantity: quantity,
                    Id: @Model.id,
                    Image: `@Model.ImageUrl`
                };
                var cartItemJSON = JSON.stringify(cartItem);

                var cartArray = new Array();
                // If javascript shopping cart session is not empty
                if (localStorage.getItem('shopping-cart')) {
                    cartArray = JSON.parse(localStorage.getItem('shopping-cart'));
                }
                cartArray.push(cartItemJSON);

                var cartJSON = JSON.stringify(cartArray);
                localStorage.setItem('shopping-cart', cartJSON);
                updateCart();
                showCartTable();
        }

            function showCartTable() {
            var cartRowHTML = "";
            var itemCount = 0;
            var grandTotal = 0;

            var price = 0;
            var quantity = 0;
            var subTotal = 0;

            if (sessionStorage.getItem('shopping-cart')) {
                var shoppingCart = JSON.parse(sessionStorage.getItem('shopping-cart'));
                itemCount = shoppingCart.length;

                //Iterate javascript shopping cart array
                shoppingCart.forEach(function(item) {
                    var cartItem = JSON.parse(item);
                    price = parseFloat(cartItem.price);
                    quantity = parseInt(cartItem.quantity);
                    subTotal = price * quantity

                    cartRowHTML += "<tr>" +
                        "<td>" + cartItem.productName + "</td>" +
                        "<td class='text-right'>$" + price.toFixed(2) + "</td>" +
                        "<td class='text-right'>" + quantity + "</td>" +
                        "<td class='text-right'>$" + subTotal.toFixed(2) + "</td>" +
                        "</tr>";

                    grandTotal += subTotal;
                });
            }

            $('#cartTableBody').html(cartRowHTML);
            $('#itemCount').text(itemCount);
            $('#totalAmount').text("$" + grandTotal.toFixed(2));
        }


    </script>
}